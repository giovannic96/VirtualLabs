<div class="tab-section" *ngIf="assignmentList?.length; else noAssignments">
  <div class="tab-subtitle">
    <mat-icon>assignment</mat-icon>
    <h2>Assignments</h2>
  </div>
  <mat-accordion multi="false">
    <mat-expansion-panel *ngFor="let assignment of this.assignmentList">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{assignment.name}}
        </mat-panel-title>
        <mat-panel-description class="panels-description" *ngIf="assignment && assignment.expiryDate">
          <div class="icons-div">
            <i>Expires in: {{formatDate(assignment.expiryDate) | date:'medium'}}</i>
          </div>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <ng-container>
          <div>
            <mat-card-title class="assignment-desc">Description</mat-card-title>
            <mat-card-subtitle class="assignment-content">{{assignment.content}}</mat-card-subtitle>
          </div>
      </ng-container>
      <div class="info-divider"></div>

      <!-- start REPORT accordion -->
      <mat-card class="report-card-container">
        <ng-container *ngIf="assignment.reports?.length">
          <mat-card-title class="report-desc">Reports</mat-card-title>
          <div class="report-accordion">
          <mat-accordion multi="false">
            <mat-expansion-panel *ngFor="let report of assignment.reports">
              <mat-expansion-panel-header class="report-panel-header">

                <!-- OLD MAT PANEL TITLE TODO remember to add report.grade to previous mat-card (div)
                <mat-panel-title>
                  {{report.grade}} {{report.owner?.name + " " + report.owner?.surname + " - " + report.owner?.id}}
                </mat-panel-title>
                -->

                <mat-panel-description class="report-panel-desc" *ngIf="report?.status">
                  <div>
                    <div class="report-header">
                      <img [src]="report.owner?.photo" mat-card-avatar>
                      <div class="report-header-text">
                        <mat-card-title class="report-owner-name">{{report.owner?.name}} {{report.owner?.surname}}</mat-card-title>
                        <mat-card-subtitle>Matricola: {{report.owner?.id}}</mat-card-subtitle>
                      </div>
                    </div>
                  </div>
                  <div class="icons-div report-status-container">
                    <span class="report-status-text">{{report.status}}</span>
                    <span [style.background-color]="getColorForStatus(report.status)" class="report-status-circle"></span>
                  </div>
                </mat-panel-description>
              </mat-expansion-panel-header>
              <ng-container *ngIf="report.versions?.length">
                <h4>Versions:</h4>
                <mat-card *ngFor="let version of report.versions">
                  <mat-card-header>
                    <mat-icon>content_paste</mat-icon>
                    <mat-card-title>{{version.title}}</mat-card-title>
                    <mat-card-subtitle>Content: {{version.content}}</mat-card-subtitle>
                  </mat-card-header>
                </mat-card>
              </ng-container>
              <mat-action-row>
                <button mat-raised-button color="warn">DELETE REPORT</button>
                <button mat-raised-button color="primary">EDIT REPORT</button>
              </mat-action-row>
            </mat-expansion-panel>
          </mat-accordion>
          </div>
        </ng-container>
      </mat-card>
      <!-- end REPORT accordion-->

      <mat-action-row class="assignment-bottom">
        <div class="icons-div">
          <i>Assigned on: {{formatDate(assignment.releaseDate) | date:'mediumDate'}}</i>
        </div>
        <div>
          <button mat-raised-button color="warn">DELETE ASSIGNMENT</button>
          <button mat-raised-button color="primary">EDIT ASSIGNMENT</button>
        </div>
      </mat-action-row>
    </mat-expansion-panel>
  </mat-accordion>
</div>
<ng-template #noAssignments>
  <div class="no-assignments-message-container" *ngIf="assignmentList">
    <mat-card><mat-card-header><mat-card-title>
      Still no assignment has been published
    </mat-card-title></mat-card-header></mat-card>
  </div>
</ng-template>
