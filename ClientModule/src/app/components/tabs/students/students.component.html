<div class="container">
  <h2>List of enrolled students</h2>
  <div class="input-student-div">
    <mat-form-field>
      <mat-label>Add student</mat-label>
      <input matInput type="text" placeholder="Name of the student"
             #addStudentInput [matAutocomplete]="ids"
             (keyup)="filterData()"
             [disabled]="!notEnrolledStudents">
    </mat-form-field>
    <mat-autocomplete #ids="matAutocomplete"
                      [displayWith]="displayStudent"
                      (optionSelected)="setCurrentSelectedOption($event)">
      <mat-option *ngFor="let student of filteredStudents"
                  [value]="student">{{student.surname}} {{student.name}} ({{student.id}})</mat-option>
    </mat-autocomplete>
    <button mat-raised-button color="accent" #addButton
            [disabled]="!currentSelectedOption || tableStudents.data.includes(currentSelectedOption)"
            (click)="enrollStudent(currentSelectedOption)">ADD
    </button>
  </div>
  <button class="delete-btn" mat-raised-button color="warn"
          [disabled]="!selectedStudents.hasValue()"
          (click)="unrollStudents()">DELETE SELECTED STUDENTS
  </button>
  <table mat-table [dataSource]="tableStudents" matSort>
    <!-- checkbox Column -->
    <ng-container matColumnDef="select">
      <th mat-header-cell *matHeaderCellDef>
        <mat-checkbox [disabled]="!tableStudents.data.length"
                      [checked]="selectedStudents.hasValue() && isAllSelected()"
                      [indeterminate]="selectedStudents.hasValue() && !isAllSelected()"
                      (change)="toggleMasterCheckbox()">
        </mat-checkbox>
      </th>
      <td mat-cell *matCellDef="let student">
        <mat-checkbox [checked]="selectedStudents.isSelected(student)"
                      (change)="selectedStudents.toggle(student)">
        </mat-checkbox>
      </td>
    </ng-container>
    <!-- id Column -->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Id </th>
      <td mat-cell *matCellDef="let student"> {{student.id}} </td>
    </ng-container>
    <!-- surname Column -->
    <ng-container matColumnDef="surname">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Surname </th>
      <td mat-cell *matCellDef="let student"> {{student.surname}} </td>
    </ng-container>
    <!-- name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
      <td mat-cell *matCellDef="let student"> {{student.name}} </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
    <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
  </table>
  <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
</div>
